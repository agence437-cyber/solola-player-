<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>SOLOLA PLAYER PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
body{
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg,#0f172a,#020617);
    color:white;
}

header{
    padding:20px;
    font-size:22px;
    font-weight:bold;
    text-align:center;
    background:rgba(255,255,255,0.05);
    backdrop-filter: blur(10px);
}

.container{
    padding:20px;
    max-width:900px;
    margin:auto;
}

.input-box{
    display:flex;
    gap:10px;
    margin-bottom:20px;
}

input{
    flex:1;
    padding:12px;
    border-radius:10px;
    border:none;
}

button{
    padding:12px 18px;
    border:none;
    border-radius:10px;
    background:#f97316;
    color:white;
    font-weight:bold;
    cursor:pointer;
}

button:hover{
    background:#ea580c;
}

video{
    width:100%;
    border-radius:15px;
    margin-top:20px;
    background:black;
}

.channel-list{
    margin-top:20px;
    display:grid;
    grid-template-columns: repeat(auto-fill,minmax(200px,1fr));
    gap:10px;
}

.channel{
    background:rgba(255,255,255,0.05);
    padding:10px;
    border-radius:10px;
    cursor:pointer;
    transition:0.3s;
}

.channel:hover{
    background:#f97316;
}
</style>
</head>

<body>

<header>SOLOLA PLAYER PRO</header>

<div class="container">

<div class="input-box">
    <input type="text" id="playlistUrl" placeholder="Collez lien .m3u8 ou .m3u">
    <button onclick="loadPlaylist()">Charger</button>
</div>

<video id="video" controls></video>

<div class="channel-list" id="channels"></div>

</div>

<script>
function playStream(url){
    const video = document.getElementById('video');

    if(Hls.isSupported() && url.includes(".m3u8")){
        const hls = new Hls();
        hls.loadSource(url);
        hls.attachMedia(video);
    }else{
        video.src = url;
    }
}

function loadPlaylist(){
    const url = document.getElementById("playlistUrl").value;

    if(url.endsWith(".m3u8")){
        playStream(url);
        return;
    }

    fetch(url)
    .then(res=>res.text())
    .then(text=>{
        const lines = text.split("\n");
        const channelContainer = document.getElementById("channels");
        channelContainer.innerHTML = "";

        for(let i=0;i<lines.length;i++){
            if(lines[i].startsWith("#EXTINF")){
                const name = lines[i].split(",")[1];
                const stream = lines[i+1];

                const div = document.createElement("div");
                div.className = "channel";
                div.innerText = name;
                div.onclick = ()=> playStream(stream);

                channelContainer.appendChild(div);
            }
        }
    })
}
</script>

</body>
</html>
